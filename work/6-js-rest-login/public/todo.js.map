{"version":3,"sources":["webpack://js-rest-login/./src/services.js","webpack://js-rest-login/./src/todo.js","webpack://js-rest-login/webpack/bootstrap","webpack://js-rest-login/webpack/runtime/define property getters","webpack://js-rest-login/webpack/runtime/hasOwnProperty shorthand","webpack://js-rest-login/webpack/runtime/make namespace object","webpack://js-rest-login/webpack/startup"],"names":["checkLoginStatus","fetch","method","Promise","reject","error","then","response","ok","json","err","performLogin","username","headers","Headers","body","JSON","stringify","performLogout","currentUser","currentSid","addLogin","userInfo","showContent","showLogin","document","querySelector","classList","add","remove","showLoginError","innerText","disableButtonIfNoInput","addEventListener","usernameEl","value","sid","renderTodos","todos","addAbilityToCompleteItems","addAbilityToAddItems","addAbilityToDeleteItems","addLogout","listEl","html","map","todo","index","done","task","join","innerHTML","inputEl","buttonEl","disabled","convertError","e","target","contains","dataset"],"mappings":"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","file":"todo.js","sourcesContent":["export const checkLoginStatus = function () {\n\treturn fetch('/session', {\n\t\tmethod: 'GET',\n\t})\n\t\t.catch(() => {\n\t\t\treturn Promise.reject({ error: 'network-error' });\n\t\t})\n\t\t.then((response) => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn response.json();\n\t\t\t}\n\t\t\treturn response.json().then((err) => Promise.reject(err));\n\t\t});\n};\n\nexport const performLogin = function (username) {\n\treturn fetch('/session', {\n\t\tmethod: 'POST',\n\t\theaders: new Headers({\n\t\t\t'content-type': 'application/json',\n\t\t}),\n\t\tbody: JSON.stringify({ username }),\n\t})\n\t\t.catch(() => {\n\t\t\treturn Promise.reject({ error: 'network-error' });\n\t\t})\n\t\t.then((response) => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn response.json();\n\t\t\t}\n\t\t\treturn response.json().then((err) => Promise.reject(err));\n\t\t});\n};\n\nexport const performLogout = function (username) {\n\treturn fetch('/session', {\n\t\tmethod: 'DELETE',\n\t\theaders: new Headers({\n\t\t\t'content-type': 'application/json',\n\t\t}),\n\t\tbody: JSON.stringify({ username }),\n\t});\n};\n","import { checkLoginStatus, performLogin, performLogout } from './services.js';\n\nlet currentUser = '';\nlet currentSid = '';\n\naddLogin();\n\n// Check for login\ncheckLoginStatus()\n\t.then((userInfo) => {\n\t\tshowContent();\n\t})\n\t.catch((error) => {\n\t\tshowLogin();\n\t});\n\n// TODO: Move these HTML-changing functions to an import from another file\nfunction showContent() {\n\tdocument.querySelector('#todo-app .login').classList.add('hidden');\n\tdocument.querySelector('#todo-app .logged-in').classList.remove('hidden');\n}\n\nfunction showLogin() {\n\tdocument.querySelector('#todo-app .login').classList.remove('hidden');\n\tdocument.querySelector('#todo-app .logged-in').classList.add('hidden');\n}\n\nfunction showLoginError(error) {\n\tdocument.querySelector('#todo-app .login-status').innerText = error.error;\n}\n\nfunction addLogin() {\n\tdisableButtonIfNoInput();\n\tdocument\n\t\t.querySelector('#todo-app .login button')\n\t\t.addEventListener('click', () => {\n\t\t\tconst usernameEl = document.querySelector('#todo-app .login input');\n\t\t\tconst username = usernameEl.value;\n\t\t\t// call service\n\t\t\tperformLogin(username)\n\t\t\t\t.then(({ userInfo, sid }) => {\n\t\t\t\t\tcurrentUser = username;\n\t\t\t\t\tcurrentSid = sid;\n\t\t\t\t\tshowContent();\n\t\t\t\t\trenderTodos(userInfo.todos);\n\t\t\t\t\taddAbilityToCompleteItems();\n\t\t\t\t\taddAbilityToAddItems();\n\t\t\t\t\taddAbilityToDeleteItems();\n\t\t\t\t\taddLogout();\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tshowLoginError(err);\n\t\t\t\t\tusernameEl.value = '';\n\t\t\t\t});\n\t\t});\n}\n\nfunction renderTodos(todos) {\n\tconst listEl = document.querySelector('#todo-app .todos');\n\tconst html = todos\n\t\t.map((todo, index) => {\n\t\t\treturn `\n      <li>\n          <span class=\"todo ${\n\t\t\t\ttodo.done ? 'complete' : ''\n\t\t\t}\" data-index=\"${index}\">${todo.task}</span>\n          <span class=\"delete\" data-index=\"${index}\">X</span>\n        </li>`;\n\t\t})\n\t\t.join('\\n');\n\tlistEl.innerHTML = html;\n}\n\nfunction disableButtonIfNoInput() {\n\tconst inputEl = document.querySelector('#todo-app .login input');\n\tconst buttonEl = document.querySelector('#todo-app .login button');\n\tinputEl.addEventListener('input', () => {\n\t\tbuttonEl.disabled = !inputEl.value;\n\t});\n}\n\nfunction convertError(response) {\n\tif (response.ok) {\n\t\treturn response.json();\n\t}\n\treturn response.json().then((err) => Promise.reject(err));\n}\n\nfunction addAbilityToCompleteItems() {\n\tconst listEl = document.querySelector('#todo-app .todos');\n\tlistEl.addEventListener('click', (e) => {\n\t\tif (!e.target.classList.contains('todo')) {\n\t\t\treturn;\n\t\t}\n\t\tconst index = e.target.dataset.index;\n\t\tfetch(`/user/${currentUser}/task/${index}`, {\n\t\t\tmethod: 'PUT',\n\t\t})\n\t\t\t.catch(() => Promise.reject({ error: 'network-error' }))\n\t\t\t.then(convertError)\n\t\t\t.then((todos) => {\n\t\t\t\trenderTodos(todos);\n\t\t\t});\n\t});\n}\n\nfunction addAbilityToAddItems() {\n\tconst buttonEl = document.querySelector('#todo-app .add');\n\tconst inputEl = document.querySelector('#todo-app .to-add');\n\tbuttonEl.addEventListener('click', (e) => {\n\t\tfetch(`/user/${currentUser}/task/${inputEl.value}`, {\n\t\t\tmethod: 'POST',\n\t\t})\n\t\t\t.catch(() => Promise.reject({ error: 'network-error' }))\n\t\t\t.then(convertError)\n\t\t\t.then((todos) => {\n\t\t\t\tinputEl.value = '';\n\t\t\t\trenderTodos(todos);\n\t\t\t});\n\t});\n}\n\nfunction addAbilityToDeleteItems() {\n\tconst listEl = document.querySelector('#todo-app .todos');\n\tlistEl.addEventListener('click', (e) => {\n\t\tif (!e.target.classList.contains('delete')) {\n\t\t\treturn;\n\t\t}\n\t\tconst index = e.target.dataset.index; // read data-index from the element\n\t\tfetch(`/user/${currentUser}/task/${index}`, {\n\t\t\tmethod: 'DELETE',\n\t\t})\n\t\t\t.catch(() => Promise.reject({ error: 'network-error' }))\n\t\t\t.then(convertError)\n\t\t\t.then((todos) => {\n\t\t\t\trenderTodos(todos);\n\t\t\t});\n\t});\n}\n\nfunction addLogout() {\n\tdocument\n\t\t.querySelector('#todo-app .logout button')\n\t\t.addEventListener('click', () => {\n\t\t\t// call service\n\t\t\tperformLogout(currentSid).then(() => {\n\t\t\t\tcurrentUser = '';\n\t\t\t\tshowLogin();\n\t\t\t});\n\t\t});\n\tconst usernameEl = document.querySelector('#todo-app .login input');\n\tusernameEl.value = '';\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/todo.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}